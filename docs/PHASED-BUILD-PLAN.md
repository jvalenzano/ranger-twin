# RANGER: Phased Build Plan

**Purpose:** A practical roadmap for building a shareable portfolio demo of agentic workflows.

**Philosophy:** Demo-First Architecture â€” get a shareable URL fast, add depth incrementally.

---

## The Stack

| Layer | Service | Why | Cost |
|-------|---------|-----|------|
| **Hosting** | Vercel | Zero-config React deploys, edge functions for API | Free tier |
| **Database** | Supabase | Postgres + Realtime (replaces Redis for pub/sub) | Free tier (500MB) |
| **AI** | Google AI Studio | Gemini API, generous free tier | Free (60 QPM) |
| **Auth** | None | Portfolio demo doesn't need auth | $0 |
| **Maps** | MapLibre + MapTiler | Free terrain tiles, open source renderer | Free tier |

**Total cost: $0** for a demo that handles reasonable traffic.

---

## Phase 1: Deployable Static Demo

**Goal:** A shareable URL that shows the vision.

**Duration:** 1-2 days

**Deliverable:** `https://ranger-demo.vercel.app` (or similar)

### What's Real
- React app deployed on Vercel
- Full UI: Lifecycle Rail, 3D Map Viewport, Agent Synapse Panel
- Static fixture data for Cedar Creek (burn severity, trail damage, timber plots)
- Simulated `AgentBriefingEvent` objects that fire on user interactions
- All 4 UI targets working: `rail_pulse`, `map_highlight`, `panel_inject`, `modal_interrupt`
- Reasoning chains and citations visible in the UI

### What's Simulated
- No backend â€” events are client-side JavaScript
- No AI â€” agent responses are pre-written JSON fixtures
- No database â€” state resets on page refresh
- No real satellite/TRACS data â€” static GeoJSON

### Technical Tasks

```
[ ] Commit existing Track A & B work to develop branch
[ ] Create data/fixtures/cedar-creek/ directory with:
    - burn-severity.json (MTBS-style severity polygons)
    - trail-damage.json (damage inventory with photos)
    - timber-plots.json (FSVeg-compatible plot data)
    - briefing-events.json (pre-composed AgentBriefingEvent payloads)
[ ] Create mock event service in frontend (no WebSocket needed)
    - Simulates the cascade: Burn Analyst â†’ Trail Assessor trigger
    - Fires events based on user clicks (lifecycle rail, suggested actions)
[ ] Wire BriefingObserver to App.tsx
[ ] Add MapLibre GL JS with MapTiler terrain tiles
[ ] Deploy to Vercel (frontend only)
[ ] Verify all 4 UI targets render correctly
```

### Success Criteria
- URL is shareable
- Clicking IMPACT rail shows Burn Analyst briefing with reasoning chain
- Clicking "Trigger Trail Assessment" causes DAMAGE rail to pulse
- Map highlights geo-referenced features from events
- Looks impressive â€” Tactical Futurism aesthetic is visible

---

## Phase 2: Real AI Orchestration

**Goal:** Gemini actually generates agent responses with real reasoning.

**Duration:** 3-5 days

**Prerequisite:** Phase 1 complete and deployed

### What's Real
- Vercel API Routes (Edge Functions) calling Gemini API
- Real `AgentBriefingEvent` generation based on user queries
- Recovery Coordinator routing logic (determines which agent to invoke)
- Dynamic reasoning chains generated by Gemini
- Natural language queries work ("What's the burn severity near Waldo Lake?")

### What's Still Simulated
- Data is still fixtures (no live satellite/TRACS APIs)
- No persistence (refresh = reset session)
- No multi-user support

### Technical Tasks

```
[ ] Set up Google AI Studio API key
[ ] Create Vercel API route: /api/query
    - Accepts user query + session context
    - Calls Gemini with agent system prompt
    - Returns structured AgentBriefingEvent
[ ] Implement Recovery Coordinator logic:
    - Parse user intent
    - Route to appropriate agent prompt
    - Inject fixture data as context
[ ] Create agent prompt templates:
    - burn-analyst-prompt.ts
    - trail-assessor-prompt.ts
    - cruising-assistant-prompt.ts
    - nepa-advisor-prompt.ts
[ ] Update frontend to call /api/query instead of mock service
[ ] Add loading states and error handling
[ ] Test cross-agent cascade with real AI responses
[ ] Deploy updated version to Vercel
```

### Success Criteria
- User can type natural language queries
- Gemini generates contextual responses with reasoning chains
- Responses include accurate citations from fixture data
- Cross-agent triggers work (Burn Analyst suggests Trail Assessor action)
- Response latency < 5 seconds

---

## Phase 3: Persistence & Polish

**Goal:** Session state persists, production-ready patterns demonstrated.

**Duration:** 3-5 days

**Prerequisite:** Phase 2 complete

### What's Real
- Supabase Postgres for session and event storage
- Supabase Realtime for pub/sub (replaces WebSocket)
- Briefing History view showing past interactions
- Correlation ID tracing across agent events
- Export functionality (TRACS CSV, FSVeg XML downloads)

### Technical Tasks

```
[ ] Set up Supabase project
[ ] Create database schema:
    - sessions table
    - briefing_events table
    - export_history table
[ ] Migrate from in-memory to Supabase:
    - Store AgentBriefingEvents on creation
    - Load session history on page load
[ ] Implement Supabase Realtime subscription
    - Replace mock event stream
    - Enable multi-tab sync
[ ] Add Briefing History panel
    - Timeline of past events
    - Filter by correlation_id
    - Click to replay/review
[ ] Implement legacy exports:
    - TRACS CSV download
    - FSVeg XML download
    - BAER GeoJSON download
[ ] Add session management (optional)
    - Save/load named sessions
    - Share session via URL
[ ] Deploy final version
```

### Success Criteria
- Refresh page â†’ session state preserved
- Multiple browser tabs stay in sync
- Briefing History shows full interaction timeline
- Exports download correctly formatted files
- Demo feels "production-ready"

---

## What We're NOT Building

To maintain focus, these are explicitly out of scope:

| Capability | Why Not |
|------------|---------|
| User authentication | Portfolio demo doesn't need it |
| Real satellite imagery pipeline | We're proving orchestration, not CV |
| Mobile field capture app | Future vision, not Phase 1-3 |
| Real TRACS/FSVeg API integration | Would require USFS partnership |
| Multi-tenant / team features | Single-user demo is sufficient |

---

## Decision Log

| Decision | Rationale |
|----------|-----------|
| Vercel over self-hosted | Zero-config deploys, free tier, edge functions |
| Supabase over Redis | Realtime built-in, Postgres for structured data, free tier |
| Gemini over OpenAI | Google ADK alignment, generous free tier, multimodal |
| No auth | Unnecessary complexity for portfolio demo |
| Fixtures before live APIs | Proves orchestration without data sourcing risk |

---

## Current Status

| Phase | Status | Notes |
|-------|--------|-------|
| Phase 1 | ðŸŸ¡ In Progress | Track A & B infrastructure complete, needs fixtures and deploy |
| Phase 2 | âšª Not Started | Waiting on Phase 1 |
| Phase 3 | âšª Not Started | Waiting on Phase 2 |

---

## Quick Reference

**To deploy Phase 1:**
```bash
cd apps/command-console
npm run build
npx vercel --prod
```

**To test locally:**
```bash
cd apps/command-console
npm run dev
# Open http://localhost:3000
```

**Key files:**
- `apps/command-console/src/App.tsx` â€” Main application
- `apps/command-console/src/components/briefing/` â€” BriefingObserver and renderers
- `data/fixtures/cedar-creek/` â€” Simulated data (create in Phase 1)
- `docs/DATA-SIMULATION-STRATEGY.md` â€” Authoritative scope document

---

## Document History

| Version | Date | Changes |
|---------|------|---------|
| 1.0 | 2025-12-20 | Initial phased build plan |
